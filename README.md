# TL;DR

```sh
cat sql/initdb.sql | mysql -h db -u mariadb -p mariadb
cat data/maillog | ./parse_maillog.pl
./app.pl daemon
```

# Замечания к постановке задачи

- Схема БД адаптирована под MariaDB
- Требование *"В таблицу log записываются все остальные строки"* можно было бы и ослабить до *"В таблицу log записываются все строки"*
- Не совсем понятно, почему в таблице `message` отсутствует поле `address`, видимо, чтобы посмотреть, как исполнитель будет выкручиваться

# Замечания по парсеру

- Параллелить разбор лога нет смысла, всё равно упрёмся в БД
- Для снижения накладных расходов на общение с БД данные объединяются в батчи
- Можно было бы кешировать statement handle, но это не критично
- Для ускорения начальной загрузки можно было бы отложить создание индексов
- По хорошему, надо было бы продумать защиту от дублирования записей на случай падения/перезапуска парсера

# Замечания по веб-приложению

- Выборка из таблицы `message` по email-адресу дожна делаться по отдельному индексированному полю `address`
- Для большего удобства можно было бы добавть FULLTEXT-ндекс для поиска по частичному совпадению
- Также в форму можно было бы добавить функцию typeahead, которая по частично введённому тексту предлагала бы несколько вариантов адреса
